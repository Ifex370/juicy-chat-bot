dist: xenial
language: node_js
os:
  - linux
node_js:
- 14
- 12
- 10
stages:
  - lint
  - test
  - deploy
install: if [ -z "$TRAVIS_TAG" ]; then npm install; fi
script: if [ -z "$TRAVIS_TAG" ]; then npm test; fi
jobs:
  include:
    - stage: lint
      if: tag IS blank
      install: npm install standard@14
#      script: npm run lint
      script: echo "Linting disabled! Uncomment line above and delete this one to turn on!"
    - stage: deploy
      if: tag IS present
      node_js: 12
      install: skip
      script: skip
      deploy:
        provider: npm
        email: npmjs.org@kimminich.de
        api_token:
          secure: 6gKdwWsPRPlQaJZIEKtjlRZHLT2DjhVk9ZFIcHhG21euoIZ1bPlfPN4sbACUG7HXGZxN/YcRyx6djqeFprMe4OPyTTYNoZbOFJBKrViys84Tbui36m2sjo+sNsJokg1V0eDilsNGYg8v4yX+JVZzEvl6sT5ZUqn3WidlAqKEydR7tGxI/a9s9JYKQwKTcQi18HqIuBU/ro+GrTuCHrdEaMcE11GsO4fH0hDbXmL/qaEqWan4HGqLIKDg+UP+togJTceR+E6+lILHS/C52oyoRcVIBGVHYvrxLVQGCc2s+1vyzVUKV2SngOBrevggQWHCUWBPZXy9mqjjxEZJz8AwG5CdEU0pPKECJSgK8rXKgMrWaA+KCgX8YzAebCahTcRiAh5hVlZJcAPZbZNevzrD5qhB7AYVYIJGHdjDnEyZpYzQrkimtw2FAy7S5If4t3sE1Eu1kQ9rR3KHpdi1Jngp1hjhrvtQtvUCNgEF3FbKMRVnXZ3nF1AIjYxIxZDYRRGad9caO2kQ8ewRvFDx4c0YbYf4egwXEC+8psLTkv3+ixElcDcm9TJqhdM7JT/4O8aMyyY+AwH/N0sa8QGmrbS4jvEzKtLIYhyoD8JL09htJ2UmRsJtxTfCVaZAA6cQ1FLd31d6ZG1yhBSn9NIPc2Fe/ggwDw1RuA67VOg04iNXBkg=
        on:
          repo: bkimminich/juicy-chat-bot
          tags: true
notifications:
  webhooks:
    urls:
      - secure: ZPOlucpYEcz+/cTNB49y6IA77cW9aAebhlTV+NlAFkMdl1HlGXcR/GXYlqWzk5de/Bt/LAEXgXI+ZpOifUbWaRaGOGOEy4zeYAKNOc92W7E6LpznbmdTUCA0n1eBT26tY0KPxAOYWL5eQO8oaM2nuRXN65tyGYnpp/hHdGvsMHaKXffCIG5MUtQP84fG62YSvgGjS6a99C9GbDNEW+66wlzLTgAVNYJOooNo9htsZiRbS5/4Tq/hesavXqjoV/vN/E6z58urp3V7CeDvEidYCEYyv2lHD9PytygDFs3xIlBzV/PXw345h4WUoPNyRNebllJy4y5i723pVypszS55uxdMlJOPQX2z2/zUj6B/FZfo2sgLoNyde3TTP+3JG2LvH43H9rzdWX0Nk5MK2VMkOgnJMEst2rbokn8rCoRHurFBKqQ7hgQp3i7gw+2GmqB1ZvmjYC3wn2PtkOf8A6i8FQEE1CQxln4kSNFeb1DQ/1sZmrJ0lKvyIPssl9ezX+NjeNEUvmvV2dPjnKdcSzcOUbWrTg5H5nkEOWSlEYrpCbKfamXGopkClTBP8MSHM8F4X2M1JbNlvrpd73Lb8bn0lBco4XS6cReoAN+oCYFFzRO48+2FWNbmsUaAl1zverDd0NPb+EU39GZc2DQUzoFg2syvM8+tW6YLib/aOCzJ65U=
    on_success: always
    on_failure: always
    on_start: never
  slack:
    rooms:
      - secure: Y2azXvVSBBXkoTx1gNwZ3t4W8e3dDSlLuzn2sNnh1PCDmuBExecyYGJYUKGV4AXKg1uBqr8NAjSSfx7mbzLwZoIRsZaYl4R+Dbf1Q1ABch4zZUC7Ytonyicj5xbLm0QHs7SRYDG0rwZVMqSdR3bBZk2F5N48SpinVCc4ovDwa+m5q6IWhgNXVHBe2mOyTLpf+FMODJAE/VDk1HEjdcI4ErWzINRGw2K8WaKbt8gAf1mVDoZ84OjwvFxoqIOnmypItXKcb1FmSVjy4DyphvPpbuME93sGYeLV/jgZ0egD7J7qwrvL0BKNtA8FCbMF0OOyUnZCkegwdLMaWnrAj3pIQVYeZOSDQ5XRL0zqeTlT86o+Ywb1L1ROKQV/oyDH9xzYKKfVquqEy6fDImCxWglfG7iqI5eFtOjw/Dubo5eip5SG2N3XhhV3MbeSdxQYjwqE1oELrK2sq4dKMc1saHDXvdEALVj+ugobx3CPFm0z6h4gEoxC+TP9EvlIm97ZVLuAvZZiExD0fGV6weLBss8vT4p/ES/inIgz0z61pVG1Ly0eaPH+Bl/JIydrnBVKYtP7gVNtBKuuiHWqVuN1gRkwtXgt8hCpatw88IMDWQaTAAiKKp6kTrluzHbQBPBD838t/Ggx2Gx0xC7C5TAR1mB7nsHhpsl6onuY1frlMWF1fvQ=
    on_success: change
    on_failure: change
    on_pull_requests: false
